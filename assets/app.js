angular.module("appProductes",["ngResource"]),angular.module("appProductes").controller("ProductesController",["$scope","ProductesSvc",function(o,c){o.productes=[],c.query(function(c){o.productes=c}),o.afegir=function(){c.save({codi:o.codiN,nom:o.nomN,seccio:o.seccioN,preu:o.preuN},function(){o.productes.unshift({codi:o.codiN,nom:o.nomN,seccio:o.seccioN,preu:o.preuN}),o.codiN="",o.nomN="",o.seccioN="",o.preuN=""})},o.editar=function(c){o.codiE=c.codi,o.nomE=c.nom,o.seccioE=c.seccio,o.preuE=c.preu,o.producteEdit=c,console.log(c)},o.actualitzar=function(){o.codiE&&o.nomE&&o.seccioE&&o.preuE&&c.update({_id:o.producteEdit._id,codi:o.codiE,nom:o.nomE,seccio:o.seccioE,preu:o.preuE},function(){o.producteEdit.codi=o.codiE,o.producteEdit.nom=o.nomE,o.producteEdit.seccio=o.seccioE,o.producteEdit.preu=o.preuE,o.codiE=null,o.nomE=null,o.seccioE=null,o.preuE=null})},o.esborrar=function(e){c["delete"]({id:e.codi},function(){o.productes.splice(e,1)})}}]),angular.module("appProductes").service("ProductesSvc",["$resource",function(o){return o("/api/productes/:id",null,{update:{method:"PUT"}})}]);